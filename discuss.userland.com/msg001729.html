<html>	<head>		<title>Troubleshooting a Nirvana Server installation</title>		</head>	<body>		<blockquote><blockquote>			<b>Archive of UserLand's first discussion group, started October 5, 1998.</b><hr>			<h2>Troubleshooting a Nirvana Server installation</h2>			<table cellpadding="0" cellspacing="5">				<tr><td><b>Author:</b></td><td>Dave Winer</td></tr>				<tr><td><b>Posted:</b></td><td>12/25/1998; 1:14:49 PM</td></tr>				<tr><td><b>Topic:</b></td><td><a href="msg001729.html">Troubleshooting a Nirvana Server installation</a></td></tr>				<tr><td><b>Msg #:</b></td><td>1729</td></tr>				<tr><td><b>Prev/Next:</b></td><td><a href="msg001727.html">1727</a> / <a href="msg001730.html">1730</a></td></tr>				</table>			<br>What is Nirvana Server?	Nirvana Server is a codename, for the server-side of Frontier 6. 	You may hear us refer to it as mainResponder, it's the same thing. Frontier's server-side architecture is built around responders and the server side of Frontier 6 is implemented in a single responder, the main one, therefore its name is mainResponder. It's like <i>main</i> in a C program. It's a beefy responder, it defines a higher level server with subscriptions, guest databases, membership, profiling, discussion groups, etc, all the new tools you see us using here on userland.com and scripting.com.	On Christmas Eve 1998 we did the first release of the software to a small group of testers. People are hitting common bumps. We'll try to smoothe them out in the future, but in the meantime here are some things to look for.Be sure your web server is turned on	From Frontier's Web menu, look in the Web Server sub-menu, if the first command is called Stop then your web server is running. From a script you can tell if the web server is running by calling inetd.isDaemonRunning (@user.inetd.config.http). Perhaps we should have the cloneNirvana script check for this after it does the install?Look in user.prefs	The one that trips up most installations is user.prefs.mailHost. If you've never run a script that sends email thru tcp.sendMail you probably have never set this value. Nirvana Server sends email as part of its mail loop for registering members. To get this to work set user.prefs.mailHost the the domain name of the SMTP server you use to send email.	user.prefs.mailAddress and user.prefs.name are used in macros in many default NS web pages. You might want to check these values and see if they make sense. Logging settings	Look in user.log.prefs. We recommend that servers only log into guest databases, not to outlines or text files. Logging to guest databases is 7-by-24, if you log to outlines you'll eventually run out of memory and your server will bog down. If you log to a text file you'll just have to parse the text file if you ever want to write scripts to operate on the data they accumulate. Restart Frontier	I got cocky and thought you could completely run NS without restarting Frontier. We now know that you will get errors if you don't restart Frontier. So before wasting too much time hunting down server problems, try quitting and relaunching Frontier. This *will* cure at least one problem, described below.	The new version of webserver.server depends on a new table, system.temp.Frontier, that's created at startup. At the head of the routine it loops over system.temp.Frontier.startingUp, guaranteeing that no request-processing code will execute until all guest databases have finished starting up. Unfortunately, this table is only set up in system.startup.startupScript (and it's right that it be that way) so unless you restart every HTTP request will fail! A word to the wise, save time, restart after installing the new stuff.config.mainResponder.urls	We initialize the strings in this table so they'll work when you're testing the server out on the same machine. When you want to access the server from a remote location, you'll have to edit all the URLs in this table so instead of pointing thru localhost they use your domain name. We could have initialized them with your domain name, thanks to tcp.dns.getMyDomainName, but then, we found, cookies don't work reliably, at least with some web browsers. (I was using MSIE 5.0b2/Win.)Questions?	If you have questions, post them as a sub-message and I'll try to incorporate the answer in this page (and in a reply to your message.)<p><p>
			<br><br><hr><b>There are responses to this message:</b><ul><li>&nbsp;<a href="msg001731.html">Re: Troubleshooting a Nirvana Server installation</a>, Doug Baron, 12/25/1998; 2:51:08 PM<p><li>&nbsp;<a href="msg001734.html">Re: Troubleshooting a Nirvana Server installation</a>, Kurt J. Egger, 12/26/1998; 9:46:02 AM<p><li>&nbsp;<a href="msg002338.html">No Semaphores Rendering and Nirvana</a>, Brent Simmons, 1/21/1999; 12:51:20 AM<p><li>&nbsp;<a href="msg002462.html">nirvana not serving images</a>, jurgen schaub, 1/25/1999; 4:48:56 PM<p><li>&nbsp;<a href="msg003081.html">[Troubleshooting F6] "Invalid Stream", says Betty</a>, Steve Ivy, 2/21/1999; 3:55:26 PM<p><li>&nbsp;<a href="msg003841.html">Re: Troubleshooting a  - End of File</a>, Andy Edmonds, 3/9/1999; 9:28:04 AM<p></ul>			<br><br><hr>This page was archived on 6/13/2001; 4:46:59 PM.<br><br>&copy; Copyright 1998-2001 <a href="http://www.userland.com/">UserLand Software</a>, Inc.			</blockquote></blockquote>		</body>	</html>